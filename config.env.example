# Homelab K8s Configuration
#
# Copy this file to config.env and fill in your values:
#   cp config.env.example config.env
#
# Generate secure passwords with:
#   ./generate-passwords.sh
#
# SECURITY: config.env contains secrets - never commit it to git!

# ============================================
# Domain configuration
# ============================================
export DOMAIN="apps.house.example.com"
export BASE_DOMAIN="house.example.com"

# ============================================
# Network configuration
# ============================================
export K8S_NODE_IP="192.168.1.111"
export K8S_VLAN="192.168.100.0/24"

# Cilium L2 LoadBalancer pools (dual-stack, replaces MetalLB)
# IPv4: /24 gives full subnet (.0-.255)
# IPv6: /64 public prefix for ingress
export CILIUM_LB_POOL_V4="192.168.100.0/24"
export CILIUM_LB_POOL_V6="2a0e:cb01:f1:1001::/64"

# Specific service IPs (dual-stack)
export TRAEFIK_IP="192.168.100.11"
export TRAEFIK_IP_V6="2a0e:cb01:f1:1001::b"
export GITEA_SSH_IP="192.168.100.22"

# Pod CIDRs (for dual-stack cluster networking)
# IPv6 must be /56 - K3s subdivides into /64 per node
export POD_CIDR_V4="10.42.0.0/16"
export POD_CIDR_V6="fd00:10:42::/56"

# Service CIDRs (for ClusterIP services)
export SERVICE_CIDR_V4="10.43.0.0/16"
export SERVICE_CIDR_V6="fd00:10:43::/112"

# ============================================
# External services
# ============================================
export POSTGRES_HOST="192.168.1.103"
export POSTGRES_PORT="5432"

# Storage network (192.168.16.x) for NFS traffic
export TRUENAS_IP="192.168.16.11"

# Local storage mount points (on K3s node VM)
export SCRATCH_PATH="/mnt/scratch"

# ============================================
# PostgreSQL Database Passwords
# These must match what's configured in PostgreSQL
# Generate with: openssl rand -base64 24
# ============================================
export POSTGRES_N8N_PASSWORD="CHANGE_ME"
export POSTGRES_GITEA_PASSWORD="CHANGE_ME"
export POSTGRES_HARBOR_PASSWORD="CHANGE_ME"
export POSTGRES_DAGSTER_PASSWORD="CHANGE_ME"
export POSTGRES_LITELLM_PASSWORD="CHANGE_ME"
export POSTGRES_IMMICH_PASSWORD="CHANGE_ME"
export POSTGRES_FRIGATE_PASSWORD="CHANGE_ME"
export POSTGRES_OSM_PASSWORD="CHANGE_ME"

# ============================================
# Redis
# ============================================
export REDIS_PASSWORD="CHANGE_ME"

# ============================================
# Service Admin Passwords
# ============================================
export GITEA_ADMIN_PASSWORD="CHANGE_ME"
export HARBOR_ADMIN_PASSWORD="CHANGE_ME"
export GRAFANA_ADMIN_PASSWORD="CHANGE_ME"

# ============================================
# LiteLLM Configuration
# ============================================
export LITELLM_MASTER_KEY="sk-CHANGE_ME"
export LITELLM_SALT_KEY="sk-salt-CHANGE_ME"

# ============================================
# n8n Configuration
# Generate with: openssl rand -hex 32
# ============================================
export N8N_ENCRYPTION_KEY="CHANGE_ME"

# ============================================
# SeaweedFS S3 Configuration
# Generate with: openssl rand -hex 16 (for keys)
# ============================================
export SEAWEEDFS_ACCESS_KEY="CHANGE_ME"
export SEAWEEDFS_SECRET_KEY="CHANGE_ME"
export SEAWEEDFS_READONLY_ACCESS_KEY="CHANGE_ME_READONLY"
export SEAWEEDFS_READONLY_SECRET_KEY="CHANGE_ME_READONLY"

# ============================================
# AWS Webhook Relay
# Deploy AWS infrastructure first: cd aws && ./deploy.sh
# The deploy script will output these values
# ============================================
export AWS_WEBHOOK_REGION="us-east-1"
export AWS_WEBHOOK_ACCESS_KEY_ID="AKIA_CHANGE_ME"
export AWS_WEBHOOK_SECRET_ACCESS_KEY="CHANGE_ME"
export AWS_WEBHOOK_QUEUE_URL="https://sqs.us-east-1.amazonaws.com/123456789/webhook-queue-prod"

# Container image for webhook-relay (optional, has default)
# export WEBHOOK_RELAY_IMAGE="harbor.apps.house.example.com/homelab/webhook-relay:latest"

# ============================================
# Optional: API Keys for LiteLLM
# Uncomment and set if using these providers
# ============================================
# export OPENAI_API_KEY=""
# export ANTHROPIC_API_KEY=""
# export AZURE_API_KEY=""
